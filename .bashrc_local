export LIBVIRT_DEFAULT_URI=qemu:///system
export EDITOR=vim

export GIT_PS1_SHOWDIRTYSTATE="1"
export GIT_PS1_SHOWSTASHSTATE="1"
export GIT_PS1_SHOWUNTRACKEDFILES="1"
export GIT_PS1_SHOWUPSTREAM="verbose"

# Enable next three variables (set to `1` or to `true`) if you want to debug git sessions
export GIT_TRACE=false
export GIT_TRACE_PACKET=false
export GIT_CURL_TRACE=false

export LS_OPTIONS='--color=auto'

export GOROOT=/usr/local/go
export GOPATH=${HOME}/Projekty/go
export PATH="${GOPATH}/bin:/usr/local/go/bin:${PATH}"


if [[ -x /usr/bin/dircolors ]]; then
  test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
fi

___git_prompt=''
if [[ -n "$(which git)" ]]; then
    ___git_prompt=' $(__git_ps1 "\[\033[0m\]| \[\033[31m\]git: \[\033[32m\]%s ")'
fi
PS1='\n\[\033[32m\][\d \t] \[\033[0m\]| \[\033[34;1m\]\u\[\033[0m\]@\[\033[31m\]\h\[\033[0m\]:\[\033[33;1m\]\w'${___git_prompt}'\[\033[0m\]\$\n\[\033[34;1m\]\u\[\033[0m\]@\[\033[31m\]\h\[\033[0m\]:\$ '


alias ls='ls $LS_OPTIONS'
alias ll='ls -l'
alias la='ls -A'
alias l='ls -CF'

alias grep='grep $LS_OPTIONS'
alias fgrep='fgrep $LS_OPTIONS'
alias egrep='egrep $LS_OPTIONS'


alias dockerclearimages="docker images --no-trunc | grep none | awk '{print \$3}' | xargs -r docker rmi"
alias dockerclearcontainers="docker ps -a --no-trunc | grep -e 'Exit' -e 'Dead' | awk '{print \$1}' | xargs -r docker rm"
alias dockerclearvolumes="docker run -v /var/run/docker.sock:/var/run/docker.sock -v /var/lib/docker:/var/lib/docker --rm martin/docker-cleanup-volumes"
alias dockerclear="dockerclearcontainers && dockerclearimages && dockerclearvolumes"

alias home_display='xrandr --output LVDS --mode 1366x768 --output HDMI-0 --mode 1920x1080 --left-of LVDS'
alias home_display_off='xrandr --output LVDS --mode 1366x768 --output HDMI-0 --off'


pdf_booklet() {
    if [ $# -ne 2 ]; then
        echo "Usage: pdf_booklet input.pdf output.pdf"
        return 1
    fi

    ready=true
    echo "Checking required software:"
    for i in pdftops psbook psnup ps2pdf; do
        echo -ne "${i}   \t"
        which ${i} >/dev/null 2>&1
        if [ $? -ne 0 ]; then
            echo "FAILED"
            ready=false
        else
            echo "OK"
        fi
    done

    if ! ${ready}; then
        echo "Please install required software. Exiting."
        return 2
    fi

    pdftops -level3 ${1} - | psbook | psnup -2 -pa4 | ps2pdf - ${2}
}


if [[ -f /etc/bash_completion ]]; then
    source /etc/bash_completion
elif [[ -f /etc/bash_completion.d/git-prompt ]]; then
    source /etc/bash_completion.d/git-prompt
fi


if [[ -d ${HOME}/.rbenv/bin ]]; then
    export PATH="${HOME}/.rbenv/bin:${PATH}"
    eval "$(rbenv init -)"
fi


if [[ -f ~/Projekty/gitlab/gdk/gdk ]]; then
    source ~/Projekty/gitlab/gdk/gdk
fi
